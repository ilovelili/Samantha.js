{"filter":false,"title":"ThumbnailsController.js","tooltip":"/lib/SamanthaClosure/src/components/ThumbnailedCarousel/ThumbnailsController.js","undoManager":{"mark":17,"position":17,"stack":[[{"group":"doc","deltas":[{"start":{"row":0,"column":0},"end":{"row":81,"column":0},"action":"insert","lines":["// Copyright 2012 Tart. All Rights Reserved.","//","// @author Firat Yalavuz firat.yalavuz@tart.com.tr","","","goog.require('tart.CircularPagination');","goog.require('tart.components.Carousel.Controller');","goog.require('tart.components.ThumbnailedCarousel.ThumbnailsView');","","goog.provide('tart.components.ThumbnailedCarousel.ThumbnailsController');","","","/**"," * @constructor"," * @extends {tart.components.Carousel.Controller}"," */","tart.components.ThumbnailedCarousel.ThumbnailsController = function(model) {","    this.pagination = new this.paginationClass();","    this.model = model || new this.modelClass();","    this.modelPager = new tart.base.plugin.Pager(this.model, new this.paginationClass());","    this.modelPager.setOffset(0);","    this.modelPager.setLimit(this.itemCount);","    this.view = new this.viewClass();","    this.buildDOM();","    this.bindEvents();","    var items = this.model.getItems(); // true = trigger load event after items loaded","    this.buildCarouselAction(items, this.model.getTotalItemCount());","};","goog.inherits(tart.components.ThumbnailedCarousel.ThumbnailsController, tart.components.Carousel.Controller);","","/**"," * @override"," */","tart.components.ThumbnailedCarousel.ThumbnailsController.prototype.viewClass = tart.components.ThumbnailedCarousel.ThumbnailsView;","","/**"," * @override"," */","tart.components.ThumbnailedCarousel.ThumbnailsController.prototype.bindEvents = function() {","    goog.base(this, 'bindEvents');","    var that = this;","    goog.events.listen(that.model, this.model.EventTypes.ACTIVE_ITEM, function(e) {","        that.modelPager.setCurrentPage(Math.ceil(e.activeItem / that.modelPager.pagination_.getItemPerPage()));","        that.view.setActiveItem(e.activeItem);","    });","};","","/**"," *"," * @param visibleItems"," * @param totalItemCount"," */","tart.components.ThumbnailedCarousel.ThumbnailsController.prototype.buildCarouselAction = function(visibleItems, totalItemCount) {","    goog.base(this, 'buildCarouselAction', visibleItems, totalItemCount);","","    this.bindThumbnailEvents();","    this.view.setActiveItem(1);","};","","tart.components.ThumbnailedCarousel.ThumbnailsController.prototype.goToPageAction = function(p) {","    goog.base(this, 'goToPageAction', p, null);","","    this.bindThumbnailEvents();","};","","tart.components.ThumbnailedCarousel.ThumbnailsController.prototype.bindThumbnailEvents = function() {","    var that = this;","    var items = that.model.getItems();","","    goog.array.forEach(items, function(item, i) {","        goog.events.removeAll(item.$thumbnail[0], goog.events.EventType.CLICK);","        (function(item, i) {","            goog.events.listen(item.$thumbnail[0], goog.events.EventType.CLICK, function(e) {","                var offset = (that.modelPager.getCurrentPage() - 1) * that.modelPager.getLimit();","                that.model.setActiveItem(offset + i);","            });","        })(item, i + 1);","    });","};","","",""]}]}],[{"group":"doc","deltas":[{"start":{"row":0,"column":0},"end":{"row":4,"column":0},"action":"remove","lines":["// Copyright 2012 Tart. All Rights Reserved.","//","// @author Firat Yalavuz firat.yalavuz@tart.com.tr","",""]}]}],[{"group":"doc","deltas":[{"start":{"row":0,"column":0},"end":{"row":1,"column":0},"action":"remove","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":0,"column":14},"end":{"row":0,"column":18},"action":"remove","lines":["tart"]},{"start":{"row":0,"column":14},"end":{"row":0,"column":29},"action":"insert","lines":["SamanthaClosure"]}]}],[{"group":"doc","deltas":[{"start":{"row":1,"column":14},"end":{"row":1,"column":18},"action":"remove","lines":["tart"]},{"start":{"row":1,"column":14},"end":{"row":1,"column":29},"action":"insert","lines":["SamanthaClosure"]}]}],[{"group":"doc","deltas":[{"start":{"row":2,"column":14},"end":{"row":2,"column":18},"action":"remove","lines":["tart"]},{"start":{"row":2,"column":14},"end":{"row":2,"column":29},"action":"insert","lines":["SamanthaClosure"]}]}],[{"group":"doc","deltas":[{"start":{"row":4,"column":14},"end":{"row":4,"column":18},"action":"remove","lines":["tart"]},{"start":{"row":4,"column":14},"end":{"row":4,"column":29},"action":"insert","lines":["SamanthaClosure"]}]}],[{"group":"doc","deltas":[{"start":{"row":9,"column":13},"end":{"row":9,"column":17},"action":"remove","lines":["tart"]},{"start":{"row":9,"column":13},"end":{"row":9,"column":28},"action":"insert","lines":["SamanthaClosure"]}]}],[{"group":"doc","deltas":[{"start":{"row":11,"column":0},"end":{"row":11,"column":4},"action":"remove","lines":["tart"]},{"start":{"row":11,"column":0},"end":{"row":11,"column":15},"action":"insert","lines":["SamanthaClosure"]}]}],[{"group":"doc","deltas":[{"start":{"row":14,"column":26},"end":{"row":14,"column":30},"action":"remove","lines":["tart"]},{"start":{"row":14,"column":26},"end":{"row":14,"column":41},"action":"insert","lines":["SamanthaClosure"]}]}],[{"group":"doc","deltas":[{"start":{"row":23,"column":14},"end":{"row":23,"column":18},"action":"remove","lines":["tart"]},{"start":{"row":23,"column":14},"end":{"row":23,"column":29},"action":"insert","lines":["SamanthaClosure"]}]}],[{"group":"doc","deltas":[{"start":{"row":23,"column":83},"end":{"row":23,"column":87},"action":"remove","lines":["tart"]},{"start":{"row":23,"column":83},"end":{"row":23,"column":98},"action":"insert","lines":["SamanthaClosure"]}]}],[{"group":"doc","deltas":[{"start":{"row":28,"column":0},"end":{"row":28,"column":4},"action":"remove","lines":["tart"]},{"start":{"row":28,"column":0},"end":{"row":28,"column":15},"action":"insert","lines":["SamanthaClosure"]}]}],[{"group":"doc","deltas":[{"start":{"row":28,"column":90},"end":{"row":28,"column":94},"action":"remove","lines":["tart"]},{"start":{"row":28,"column":90},"end":{"row":28,"column":105},"action":"insert","lines":["SamanthaClosure"]}]}],[{"group":"doc","deltas":[{"start":{"row":33,"column":0},"end":{"row":33,"column":4},"action":"remove","lines":["tart"]},{"start":{"row":33,"column":0},"end":{"row":33,"column":15},"action":"insert","lines":["SamanthaClosure"]}]}],[{"group":"doc","deltas":[{"start":{"row":47,"column":0},"end":{"row":47,"column":4},"action":"remove","lines":["tart"]},{"start":{"row":47,"column":0},"end":{"row":47,"column":15},"action":"insert","lines":["SamanthaClosure"]}]}],[{"group":"doc","deltas":[{"start":{"row":54,"column":0},"end":{"row":54,"column":4},"action":"remove","lines":["tart"]},{"start":{"row":54,"column":0},"end":{"row":54,"column":15},"action":"insert","lines":["SamanthaClosure"]}]}],[{"group":"doc","deltas":[{"start":{"row":60,"column":0},"end":{"row":60,"column":4},"action":"remove","lines":["tart"]},{"start":{"row":60,"column":0},"end":{"row":60,"column":15},"action":"insert","lines":["SamanthaClosure"]}]}]]},"ace":{"folds":[],"scrolltop":800.5,"scrollleft":0,"selection":{"start":{"row":61,"column":20},"end":{"row":61,"column":20},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1425216559227,"hash":"0cf7f5ed91134e734b974f2b602bf3955ccf7da3"}