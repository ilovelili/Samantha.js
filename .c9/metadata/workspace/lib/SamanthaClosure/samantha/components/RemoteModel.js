{"filter":false,"title":"RemoteModel.js","tooltip":"/lib/SamanthaClosure/samantha/components/RemoteModel.js","undoManager":{"mark":15,"position":15,"stack":[[{"group":"doc","deltas":[{"start":{"row":0,"column":0},"end":{"row":75,"column":0},"action":"insert","lines":["// Copyright 2012 Tart. All Rights Reserved.","//","// @author Firat Yalavuz firat.yalavuz@tart.com.tr","","/**"," * @fileoverview tart.components.RemoteModel RemoteModel which gets data from Xhr."," */","","goog.provide('tart.components.models.RemoteModel');","goog.require('tart.base.Model');","goog.require('tart.dataProxy.Xhr');","","","/**"," * Remote Model"," *"," * @extends {tart.base.Model}"," * @constructor"," */","tart.components.models.RemoteModel = function() {","    goog.base(this);","    this.params.set('method_', 'post');","    this.params.set('url_', this.url);","    this.totalCount = 0;","    this.proxy = new this.proxyClass();","};","goog.inherits(tart.components.models.RemoteModel, tart.base.Model);","","/**"," * RemoteModel's entity class. Default value is undefined."," */","tart.components.models.RemoteModel.prototype.entityClass = undefined;","","tart.components.models.RemoteModel.prototype.proxyClass = tart.dataProxy.Xhr;","","/**"," * RemoteModel's request url. Default value is undefined."," */","tart.components.models.RemoteModel.prototype.url = undefined;","","","/**"," * Load data and map data to entity."," * @param {Function=} opt_callback method to call after load."," */","tart.components.models.RemoteModel.prototype.load = function(opt_callback) {","    var that = this;","","    that.proxy.setParams(this.params);","    that.proxy.fetch(function(data) {","        that.mapDataToEntities(data);","        if (opt_callback) {","            opt_callback.call(this, that.getItems());","        }","    });","};","","","/**"," * map data to entity class."," * @param {Object} xhrData data returned from xhr request."," * @protected"," */","tart.components.models.RemoteModel.prototype.mapDataToEntities = function(xhrData) {","","    var items = [], collection = xhrData['data'];","","    for (var i = 0, l = collection.length; i < l; i++) {","        items.push(new this.entityClass(collection[i]));","    }","","    this.totalCount = items.length;","","    this.setItems(items);","};",""]}]}],[{"group":"doc","deltas":[{"start":{"row":0,"column":0},"end":{"row":4,"column":0},"action":"remove","lines":["// Copyright 2012 Tart. All Rights Reserved.","//","// @author Firat Yalavuz firat.yalavuz@tart.com.tr","",""]}]}],[{"group":"doc","deltas":[{"start":{"row":1,"column":17},"end":{"row":1,"column":21},"action":"remove","lines":["tart"]},{"start":{"row":1,"column":17},"end":{"row":1,"column":32},"action":"insert","lines":["samanthaClosure"]}]}],[{"group":"doc","deltas":[{"start":{"row":4,"column":14},"end":{"row":4,"column":18},"action":"remove","lines":["tart"]},{"start":{"row":4,"column":14},"end":{"row":4,"column":29},"action":"insert","lines":["samanthaClosure"]}]}],[{"group":"doc","deltas":[{"start":{"row":5,"column":14},"end":{"row":5,"column":18},"action":"remove","lines":["tart"]},{"start":{"row":5,"column":14},"end":{"row":5,"column":29},"action":"insert","lines":["samanthaClosure"]}]}],[{"group":"doc","deltas":[{"start":{"row":6,"column":14},"end":{"row":6,"column":18},"action":"remove","lines":["tart"]},{"start":{"row":6,"column":14},"end":{"row":6,"column":29},"action":"insert","lines":["samanthaClosure"]}]}],[{"group":"doc","deltas":[{"start":{"row":12,"column":13},"end":{"row":12,"column":17},"action":"remove","lines":["tart"]},{"start":{"row":12,"column":13},"end":{"row":12,"column":28},"action":"insert","lines":["samanthaClosure"]}]}],[{"group":"doc","deltas":[{"start":{"row":15,"column":0},"end":{"row":15,"column":4},"action":"remove","lines":["tart"]},{"start":{"row":15,"column":0},"end":{"row":15,"column":15},"action":"insert","lines":["samanthaClosure"]}]}],[{"group":"doc","deltas":[{"start":{"row":22,"column":14},"end":{"row":22,"column":18},"action":"remove","lines":["tart"]},{"start":{"row":22,"column":14},"end":{"row":22,"column":29},"action":"insert","lines":["samanthaClosure"]}]}],[{"group":"doc","deltas":[{"start":{"row":22,"column":61},"end":{"row":22,"column":65},"action":"remove","lines":["tart"]},{"start":{"row":22,"column":61},"end":{"row":22,"column":76},"action":"insert","lines":["samanthaClosure"]}]}],[{"group":"doc","deltas":[{"start":{"row":27,"column":0},"end":{"row":27,"column":4},"action":"remove","lines":["tart"]},{"start":{"row":27,"column":0},"end":{"row":27,"column":15},"action":"insert","lines":["samanthaClosure"]}]}],[{"group":"doc","deltas":[{"start":{"row":29,"column":0},"end":{"row":29,"column":4},"action":"remove","lines":["tart"]},{"start":{"row":29,"column":0},"end":{"row":29,"column":15},"action":"insert","lines":["samanthaClosure"]}]}],[{"group":"doc","deltas":[{"start":{"row":29,"column":69},"end":{"row":29,"column":73},"action":"remove","lines":["tart"]},{"start":{"row":29,"column":69},"end":{"row":29,"column":84},"action":"insert","lines":["samanthaClosure"]}]}],[{"group":"doc","deltas":[{"start":{"row":34,"column":0},"end":{"row":34,"column":4},"action":"remove","lines":["tart"]},{"start":{"row":34,"column":0},"end":{"row":34,"column":15},"action":"insert","lines":["samanthaClosure"]}]}],[{"group":"doc","deltas":[{"start":{"row":41,"column":0},"end":{"row":41,"column":4},"action":"remove","lines":["tart"]},{"start":{"row":41,"column":0},"end":{"row":41,"column":15},"action":"insert","lines":["samanthaClosure"]}]}],[{"group":"doc","deltas":[{"start":{"row":59,"column":0},"end":{"row":59,"column":4},"action":"remove","lines":["tart"]},{"start":{"row":59,"column":0},"end":{"row":59,"column":15},"action":"insert","lines":["samanthaClosure"]}]}]]},"ace":{"folds":[],"scrolltop":740,"scrollleft":0,"selection":{"start":{"row":60,"column":0},"end":{"row":60,"column":0},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1425188803474,"hash":"a540d4c3015d1ec9dfc0714209291fc23f361280"}