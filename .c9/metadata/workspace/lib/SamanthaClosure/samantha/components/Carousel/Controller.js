{"filter":false,"title":"Controller.js","tooltip":"/lib/SamanthaClosure/samantha/components/Carousel/Controller.js","undoManager":{"mark":29,"position":29,"stack":[[{"group":"doc","deltas":[{"start":{"row":0,"column":0},"end":{"row":150,"column":0},"action":"insert","lines":["// Copyright 2012 Tart. All Rights Reserved.","//","// @author Firat Yalavuz firat.yalavuz@tart.com.tr","","/**"," * @fileoverview tart.components.Carousel.Controller is a base class for all carousel Controller's."," */","","","goog.require('goog.events.EventTarget');","goog.require('goog.events.EventTarget');","goog.require('tart.Pagination');","goog.require('tart.base.plugin.Pager');","goog.require('tart.components.Carousel.Model');","goog.require('tart.components.Carousel.Template');","goog.require('tart.components.Carousel.View');","goog.require('tart.components.Controller');","","goog.provide('tart.components.Carousel.Controller');","","","","/**"," * Example controller class"," *"," * @extends {tart.components.Controller}"," *"," * @constructor"," */","tart.components.Carousel.Controller = function() {","    this.model = this.model || new this.modelClass();","    this.modelPager = new tart.base.plugin.Pager(this.model, new this.paginationClass());","    this.modelPager.setOffset(0);","    this.modelPager.setLimit(this.itemCount);","    this.view = new this.viewClass();","    this.buildDOM();","    this.bindEvents();","};","goog.inherits(tart.components.Carousel.Controller, tart.components.Controller);","","/**"," * Carousel's View Class"," */","tart.components.Carousel.Controller.prototype.viewClass = tart.components.Carousel.View;","","/**"," * Carousel's Model Class"," */","tart.components.Carousel.Controller.prototype.modelClass = tart.components.Carousel.Model;","","/**"," * Carousel's Pagination Class"," */","tart.components.Carousel.Controller.prototype.paginationClass = tart.Pagination;","","/**"," * Number of carousel items"," */","tart.components.Carousel.Controller.prototype.itemCount = 5;","","","/**"," * Build carousel after items' loaded"," * @param {Object} visibleItems visible items."," * @param {number} totalItemCount total item count."," */","tart.components.Carousel.Controller.prototype.buildCarouselAction = function(visibleItems, totalItemCount) {","    if (visibleItems.length == 0)","\t\tthis.view.noResults();","\telse {","\t    //build carousel","\t    this.view.buildCarouselItems(visibleItems);","\t    //build pagination","\t    this.modelPager.setTotalItems(totalItemCount);","\t    if (totalItemCount > this.itemCount) {","\t        this.view.buildPager(this.modelPager);","\t    }","\t}","    ","\tthis.view.handleNavigationButtons(this.modelPager.hasNext(), this.modelPager.hasPrev());","};","","","/**"," * Go to page in given direction"," * @param {string} direction move direction."," * @param {Number} pageNumber page number to go."," */","tart.components.Carousel.Controller.prototype.goToPageAction = function(direction, pageNumber) {","    var items = this.model.getItems();","    this.view.move(direction, items, this.modelPager.getLimit());","    this.view.setPageSelected(pageNumber);","};","","","/**"," * move next page"," */","tart.components.Carousel.Controller.prototype.nextAction = function() {","    this.modelPager.next();","};","","","/**"," * move previous page"," *"," */","tart.components.Carousel.Controller.prototype.prevAction = function() {","    this.modelPager.prev();","};","","","/**"," * Bind controller events"," * @protected"," */","tart.components.Carousel.Controller.prototype.bindEvents = function() {","    var that = this;","","    //triggered when model.getItems() called","    goog.events.listen(that.model, tart.components.Carousel.Model.EventTypes.ITEMS_LOADED, function(e) {","        that.buildCarouselAction(e.visibleItems, e.totalItemCount);","        if (e.visibleItems.length > 0) {","            goog.style.setStyle(that.view.getDOM(), 'display', 'block');","        }","    });","","    //Triggered when page changed","    goog.events.listen(that.modelPager, tart.Pagination.EventTypes.PAGE_CHANGED, function(e) {","","        //dont do anything if page not changed","","        if (e.oldValue != e.newValue) {","            var direction;","            if (e.newValue > e.oldValue) {","                direction = 'next';","            }","            else {","                direction = 'prev';","            }","            that.goToPageAction(direction, e.newValue);","        }","        that.view.handleNavigationButtons(that.modelPager.hasNext(), that.modelPager.hasPrev());","    });","","    goog.events.listen(that.view.get(that.view.domMappings.NEXT)[0], goog.events.EventType.CLICK,","\t        this.nextAction, false, this);","    goog.events.listen(that.view.get(that.view.domMappings.PREV)[0], goog.events.EventType.CLICK,","\t        this.prevAction, false, this);","};",""]}]}],[{"group":"doc","deltas":[{"start":{"row":0,"column":0},"end":{"row":3,"column":0},"action":"remove","lines":["// Copyright 2012 Tart. All Rights Reserved.","//","// @author Firat Yalavuz firat.yalavuz@tart.com.tr",""]}]}],[{"group":"doc","deltas":[{"start":{"row":0,"column":0},"end":{"row":1,"column":0},"action":"remove","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":1,"column":17},"end":{"row":1,"column":21},"action":"remove","lines":["tart"]},{"start":{"row":1,"column":17},"end":{"row":1,"column":32},"action":"insert","lines":["samanthaClosure"]}]}],[{"group":"doc","deltas":[{"start":{"row":7,"column":14},"end":{"row":7,"column":18},"action":"remove","lines":["tart"]},{"start":{"row":7,"column":14},"end":{"row":7,"column":29},"action":"insert","lines":["samanthaClosure"]}]}],[{"group":"doc","deltas":[{"start":{"row":8,"column":14},"end":{"row":8,"column":18},"action":"remove","lines":["tart"]},{"start":{"row":8,"column":14},"end":{"row":8,"column":29},"action":"insert","lines":["samanthaClosure"]}]}],[{"group":"doc","deltas":[{"start":{"row":9,"column":14},"end":{"row":9,"column":18},"action":"remove","lines":["tart"]},{"start":{"row":9,"column":14},"end":{"row":9,"column":29},"action":"insert","lines":["samanthaClosure"]}]}],[{"group":"doc","deltas":[{"start":{"row":10,"column":14},"end":{"row":10,"column":18},"action":"remove","lines":["tart"]},{"start":{"row":10,"column":14},"end":{"row":10,"column":29},"action":"insert","lines":["samanthaClosure"]}]}],[{"group":"doc","deltas":[{"start":{"row":11,"column":14},"end":{"row":11,"column":18},"action":"remove","lines":["tart"]},{"start":{"row":11,"column":14},"end":{"row":11,"column":29},"action":"insert","lines":["samanthaClosure"]}]}],[{"group":"doc","deltas":[{"start":{"row":12,"column":14},"end":{"row":12,"column":18},"action":"remove","lines":["tart"]},{"start":{"row":12,"column":14},"end":{"row":12,"column":29},"action":"insert","lines":["samanthaClosure"]}]}],[{"group":"doc","deltas":[{"start":{"row":14,"column":14},"end":{"row":14,"column":18},"action":"remove","lines":["tart"]},{"start":{"row":14,"column":14},"end":{"row":14,"column":29},"action":"insert","lines":["samanthaClosure"]}]}],[{"group":"doc","deltas":[{"start":{"row":21,"column":13},"end":{"row":21,"column":17},"action":"remove","lines":["tart"]},{"start":{"row":21,"column":13},"end":{"row":21,"column":28},"action":"insert","lines":["samanthaClosure"]}]}],[{"group":"doc","deltas":[{"start":{"row":25,"column":0},"end":{"row":25,"column":4},"action":"remove","lines":["tart"]},{"start":{"row":25,"column":0},"end":{"row":25,"column":15},"action":"insert","lines":["samanthaClosure"]}]}],[{"group":"doc","deltas":[{"start":{"row":27,"column":26},"end":{"row":27,"column":30},"action":"remove","lines":["tart"]},{"start":{"row":27,"column":26},"end":{"row":27,"column":41},"action":"insert","lines":["samanthaClosure"]}]}],[{"group":"doc","deltas":[{"start":{"row":34,"column":14},"end":{"row":34,"column":18},"action":"remove","lines":["tart"]},{"start":{"row":34,"column":14},"end":{"row":34,"column":29},"action":"insert","lines":["samanthaClosure"]}]}],[{"group":"doc","deltas":[{"start":{"row":34,"column":62},"end":{"row":34,"column":66},"action":"remove","lines":["tart"]},{"start":{"row":34,"column":62},"end":{"row":34,"column":77},"action":"insert","lines":["samanthaClosure"]}]}],[{"group":"doc","deltas":[{"start":{"row":39,"column":0},"end":{"row":39,"column":4},"action":"remove","lines":["tart"]},{"start":{"row":39,"column":0},"end":{"row":39,"column":15},"action":"insert","lines":["samanthaClosure"]}]}],[{"group":"doc","deltas":[{"start":{"row":39,"column":69},"end":{"row":39,"column":73},"action":"remove","lines":["tart"]},{"start":{"row":39,"column":69},"end":{"row":39,"column":84},"action":"insert","lines":["samanthaClosure"]}]}],[{"group":"doc","deltas":[{"start":{"row":44,"column":0},"end":{"row":44,"column":4},"action":"remove","lines":["tart"]},{"start":{"row":44,"column":0},"end":{"row":44,"column":15},"action":"insert","lines":["samanthaClosure"]}]}],[{"group":"doc","deltas":[{"start":{"row":44,"column":70},"end":{"row":44,"column":74},"action":"remove","lines":["tart"]},{"start":{"row":44,"column":70},"end":{"row":44,"column":85},"action":"insert","lines":["samanthaClosure"]}]}],[{"group":"doc","deltas":[{"start":{"row":49,"column":0},"end":{"row":49,"column":4},"action":"remove","lines":["tart"]},{"start":{"row":49,"column":0},"end":{"row":49,"column":15},"action":"insert","lines":["samanthaClosure"]}]}],[{"group":"doc","deltas":[{"start":{"row":49,"column":75},"end":{"row":49,"column":79},"action":"remove","lines":["tart"]},{"start":{"row":49,"column":75},"end":{"row":49,"column":90},"action":"insert","lines":["samanthaClosure"]}]}],[{"group":"doc","deltas":[{"start":{"row":54,"column":0},"end":{"row":54,"column":4},"action":"remove","lines":["tart"]},{"start":{"row":54,"column":0},"end":{"row":54,"column":15},"action":"insert","lines":["samanthaClosure"]}]}],[{"group":"doc","deltas":[{"start":{"row":62,"column":0},"end":{"row":62,"column":4},"action":"remove","lines":["tart"]},{"start":{"row":62,"column":0},"end":{"row":62,"column":15},"action":"insert","lines":["samanthaClosure"]}]}],[{"group":"doc","deltas":[{"start":{"row":84,"column":0},"end":{"row":84,"column":4},"action":"remove","lines":["tart"]},{"start":{"row":84,"column":0},"end":{"row":84,"column":15},"action":"insert","lines":["samanthaClosure"]}]}],[{"group":"doc","deltas":[{"start":{"row":94,"column":0},"end":{"row":94,"column":4},"action":"remove","lines":["tart"]},{"start":{"row":94,"column":0},"end":{"row":94,"column":15},"action":"insert","lines":["samanthaClosure"]}]}],[{"group":"doc","deltas":[{"start":{"row":103,"column":0},"end":{"row":103,"column":4},"action":"remove","lines":["tart"]},{"start":{"row":103,"column":0},"end":{"row":103,"column":15},"action":"insert","lines":["samanthaClosure"]}]}],[{"group":"doc","deltas":[{"start":{"row":112,"column":0},"end":{"row":112,"column":4},"action":"remove","lines":["tart"]},{"start":{"row":112,"column":0},"end":{"row":112,"column":15},"action":"insert","lines":["samanthaClosure"]}]}],[{"group":"doc","deltas":[{"start":{"row":116,"column":35},"end":{"row":116,"column":39},"action":"remove","lines":["tart"]},{"start":{"row":116,"column":35},"end":{"row":116,"column":50},"action":"insert","lines":["samanthaClosure"]}]}],[{"group":"doc","deltas":[{"start":{"row":124,"column":40},"end":{"row":124,"column":44},"action":"remove","lines":["tart"]},{"start":{"row":124,"column":40},"end":{"row":124,"column":55},"action":"insert","lines":["samanthaClosure"]}]}]]},"ace":{"folds":[],"scrolltop":1780,"scrollleft":0,"selection":{"start":{"row":133,"column":18},"end":{"row":133,"column":18},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1425189150700,"hash":"fba719e4b85dadae4aa4ed682a416e01aa42b174"}