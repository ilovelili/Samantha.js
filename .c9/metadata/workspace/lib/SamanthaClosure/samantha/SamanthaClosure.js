{"filter":false,"title":"SamanthaClosure.js","tooltip":"/lib/SamanthaClosure/samantha/SamanthaClosure.js","undoManager":{"mark":8,"position":8,"stack":[[{"group":"doc","deltas":[{"start":{"row":0,"column":0},"end":{"row":89,"column":0},"action":"insert","lines":["// Copyright 2011 Tart. All Rights Reserved.","//","// Licensed under the Apache License, Version 2.0 (the \"License\");","// you may not use this file except in compliance with the License.","// You may obtain a copy of the License at","//","//      http://www.apache.org/licenses/LICENSE-2.0","//","// Unless required by applicable law or agreed to in writing, software","// distributed under the License is distributed on an \"AS-IS\" BASIS,","// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.","// See the License for the specific language governing permissions and","// limitations under the License.","","/**"," * @fileoverview tartJS base."," */","goog.provide('tart');","","","","/** @typedef {Object} */","tart.JSON;","","(function() {","    var counter = Math.floor(Math.random() * 2147483648);","    tart.getUid = function() {","        return (counter++).toString(36);","    }","})();","","","/**"," * @typedef {{method, headers, url, data}}"," */","tart.XhrOptions;","","","/**"," * Makes XHR requests with given options. This is"," *"," * @param {tart.XhrOptions|string} options Options for this method. This can also be a simple string denoting the URL."," * @param {function(boolean, Object, number)=} opt_callback Callback to execute when the request ends."," *                                                          It will be invoked with errors, data and status code."," * @param {Object=} opt_context The context of the callback to be applied."," */","tart.xhr = function(options, opt_callback, opt_context) {","    var req = new XMLHttpRequest(),","        opts = options;","","    if (typeof options == 'string')","        opts = {","            url: options","        };","","    opts.method = opts.method || 'GET';","    opts.headers = opts.headers || {};","","    if ((opts.method == 'PUT' || opts.method == 'POST') &&","        !opts.headers['Content-Type'] &&","        typeof opts.data == 'object')","        opts.headers['Content-Type'] = 'application/json';","","    req.open(opts.method, opts.url, true);","","    Object.keys(opts.headers).forEach(function(key) {","        req.setRequestHeader(key, opts.headers[key]);","    });","","    req.onreadystatechange = function(e) {","        if (req.readyState != 4) return;","","        var data,","            err = false;","","        if ([200, 304].indexOf(req.status) == -1)","            err = true;","","        try {","            data = JSON.parse(e.target.response);","        } catch (ex) {","            data = e.target.response;","        }","","        opt_callback && opt_callback.call(opt_context || goog.global, err, data, req.status);","    };","    req.withCredentials = true;","    req.send(JSON.stringify(opts.data));","};",""]}]}],[{"group":"doc","deltas":[{"start":{"row":0,"column":0},"end":{"row":12,"column":33},"action":"remove","lines":["// Copyright 2011 Tart. All Rights Reserved.","//","// Licensed under the Apache License, Version 2.0 (the \"License\");","// you may not use this file except in compliance with the License.","// You may obtain a copy of the License at","//","//      http://www.apache.org/licenses/LICENSE-2.0","//","// Unless required by applicable law or agreed to in writing, software","// distributed under the License is distributed on an \"AS-IS\" BASIS,","// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.","// See the License for the specific language governing permissions and","// limitations under the License."]}]}],[{"group":"doc","deltas":[{"start":{"row":0,"column":0},"end":{"row":1,"column":0},"action":"remove","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":22,"column":0},"end":{"row":22,"column":4},"action":"remove","lines":["tart"]},{"start":{"row":22,"column":0},"end":{"row":22,"column":15},"action":"insert","lines":["SamanthaClosure"]}]}],[{"group":"doc","deltas":[{"start":{"row":28,"column":11},"end":{"row":28,"column":15},"action":"remove","lines":["tart"]},{"start":{"row":28,"column":11},"end":{"row":28,"column":26},"action":"insert","lines":["SamanthaClosure"]}]}],[{"group":"doc","deltas":[{"start":{"row":33,"column":0},"end":{"row":33,"column":4},"action":"remove","lines":["tart"]},{"start":{"row":33,"column":0},"end":{"row":33,"column":15},"action":"insert","lines":["SamanthaClosure"]}]}],[{"group":"doc","deltas":[{"start":{"row":13,"column":4},"end":{"row":13,"column":8},"action":"remove","lines":["tart"]},{"start":{"row":13,"column":4},"end":{"row":13,"column":19},"action":"insert","lines":["SamanthaClosure"]}]}],[{"group":"doc","deltas":[{"start":{"row":9,"column":0},"end":{"row":9,"column":4},"action":"remove","lines":["tart"]},{"start":{"row":9,"column":0},"end":{"row":9,"column":15},"action":"insert","lines":["SamanthaClosure"]}]}],[{"group":"doc","deltas":[{"start":{"row":4,"column":14},"end":{"row":4,"column":18},"action":"remove","lines":["tart"]},{"start":{"row":4,"column":14},"end":{"row":4,"column":29},"action":"insert","lines":["SamanthaClosure"]}]}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":13,"column":41},"end":{"row":13,"column":41},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1425209696952,"hash":"c6e2ceaaa06322ad21eeda86a4d99e367b309011"}