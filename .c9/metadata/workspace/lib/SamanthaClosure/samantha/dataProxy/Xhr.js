{"filter":false,"title":"Xhr.js","tooltip":"/lib/SamanthaClosure/samantha/dataProxy/Xhr.js","undoManager":{"mark":13,"position":13,"stack":[[{"group":"doc","deltas":[{"start":{"row":0,"column":0},"end":{"row":76,"column":0},"action":"insert","lines":["// Copyright 2011 Tart. All Rights Reserved.","//","// Licensed under the Apache License, Version 2.0 (the \"License\");","// you may not use this file except in compliance with the License.","// You may obtain a copy of the License at","//","//      http://www.apache.org/licenses/LICENSE-2.0","//","// Unless required by applicable law or agreed to in writing, software","// distributed under the License is distributed on an \"AS-IS\" BASIS,","// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.","// See the License for the specific language governing permissions and","// limitations under the License.","","/**"," * @fileoverview tart.dataProxy.Xhr XHR data proxy."," */","","goog.provide('tart.dataProxy.Xhr');","","goog.require('tart.XhrManager');","goog.require('tart.dataProxy.Abstract');","","","","/**"," * Base model to handle xhr requests"," *"," * @extends {tart.dataProxy.Abstract}"," * @constructor"," */","tart.dataProxy.Xhr = function() {","    goog.base(this);","};","goog.inherits(tart.dataProxy.Xhr, tart.dataProxy.Abstract);","","","/**"," * Fetch data from xhr and call a function with returned data"," * @param {?function(Object)} callback function to call with returned data."," * @param {function(Object)=} opt_fail function to call when request failed."," */","tart.dataProxy.Xhr.prototype.fetch = function(callback, opt_fail) {","    var url = this.params.get('url_');","    this.params.remove('url_');","    url = '' + url; //cast to string to make it type safe for XhrManager.get","","    var method = this.params.get('method_');","    var methodFn;","    this.params.remove('method_');","","    switch (method) {","        case 'post' :","            methodFn = tart.XhrManager.post;","            break;","        default:","            methodFn = tart.XhrManager.get;","    }","","    /**","     * get plain objects from Maps from given plugins","     */","    var pluginParams = this.params.getKeys();","","    for (var i = 0, ii = pluginParams.length; i < ii; i++) {","        var param = this.params.get(pluginParams[i]);","        if (param && param.constructor == goog.structs.Map) {","            this.params.set(pluginParams[i], param.toObject());","        }","        else {","            this.params.set(pluginParams[i], param);","        }","    }","","    methodFn(url, this.params.toObject(), callback, opt_fail);","};",""]}]}],[{"group":"doc","deltas":[{"start":{"row":0,"column":0},"end":{"row":13,"column":0},"action":"remove","lines":["// Copyright 2011 Tart. All Rights Reserved.","//","// Licensed under the Apache License, Version 2.0 (the \"License\");","// you may not use this file except in compliance with the License.","// You may obtain a copy of the License at","//","//      http://www.apache.org/licenses/LICENSE-2.0","//","// Unless required by applicable law or agreed to in writing, software","// distributed under the License is distributed on an \"AS-IS\" BASIS,","// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.","// See the License for the specific language governing permissions and","// limitations under the License.",""]}]}],[{"group":"doc","deltas":[{"start":{"row":0,"column":0},"end":{"row":1,"column":0},"action":"remove","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":1,"column":17},"end":{"row":1,"column":21},"action":"remove","lines":["tart"]},{"start":{"row":1,"column":17},"end":{"row":1,"column":32},"action":"insert","lines":["samanthaClosure"]}]}],[{"group":"doc","deltas":[{"start":{"row":4,"column":14},"end":{"row":4,"column":18},"action":"remove","lines":["tart"]},{"start":{"row":4,"column":14},"end":{"row":4,"column":29},"action":"insert","lines":["samanthaClosure"]}]}],[{"group":"doc","deltas":[{"start":{"row":6,"column":14},"end":{"row":6,"column":18},"action":"remove","lines":["tart"]},{"start":{"row":6,"column":14},"end":{"row":6,"column":29},"action":"insert","lines":["samanthaClosure"]}]}],[{"group":"doc","deltas":[{"start":{"row":7,"column":14},"end":{"row":7,"column":18},"action":"remove","lines":["tart"]},{"start":{"row":7,"column":14},"end":{"row":7,"column":29},"action":"insert","lines":["samanthaClosure"]}]}],[{"group":"doc","deltas":[{"start":{"row":14,"column":13},"end":{"row":14,"column":17},"action":"remove","lines":["tart"]},{"start":{"row":14,"column":13},"end":{"row":14,"column":28},"action":"insert","lines":["samanthaClosure"]}]}],[{"group":"doc","deltas":[{"start":{"row":17,"column":0},"end":{"row":17,"column":4},"action":"remove","lines":["tart"]},{"start":{"row":17,"column":0},"end":{"row":17,"column":15},"action":"insert","lines":["samanthaClosure"]}]}],[{"group":"doc","deltas":[{"start":{"row":20,"column":14},"end":{"row":20,"column":18},"action":"remove","lines":["tart"]},{"start":{"row":20,"column":14},"end":{"row":20,"column":29},"action":"insert","lines":["samanthaClosure"]}]}],[{"group":"doc","deltas":[{"start":{"row":20,"column":45},"end":{"row":20,"column":49},"action":"remove","lines":["tart"]},{"start":{"row":20,"column":45},"end":{"row":20,"column":60},"action":"insert","lines":["samanthaClosure"]}]}],[{"group":"doc","deltas":[{"start":{"row":28,"column":0},"end":{"row":28,"column":4},"action":"remove","lines":["tart"]},{"start":{"row":28,"column":0},"end":{"row":28,"column":15},"action":"insert","lines":["samanthaClosure"]}]}],[{"group":"doc","deltas":[{"start":{"row":39,"column":23},"end":{"row":39,"column":27},"action":"remove","lines":["tart"]},{"start":{"row":39,"column":23},"end":{"row":39,"column":38},"action":"insert","lines":["samanthaClosure"]}]}],[{"group":"doc","deltas":[{"start":{"row":42,"column":23},"end":{"row":42,"column":27},"action":"remove","lines":["tart"]},{"start":{"row":42,"column":23},"end":{"row":42,"column":38},"action":"insert","lines":["samanthaClosure"]}]}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":51,"column":53},"end":{"row":51,"column":53},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1425189763060,"hash":"4cf17641e214aac61c644137e16a44b9bf33a009"}